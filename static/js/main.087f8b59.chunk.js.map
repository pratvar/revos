{"version":3,"sources":["index.js"],"names":["data","obj","trip","vehicle1","slice","vehicle2","Select","vin","setVin","tripId","setTripId","className","htmlFor","name","id","value","onChange","e","target","disabled","selected","map","cur","i","key","Data","linechart","useRef","useEffect","chart","d3","current","selectAll","remove","batteryVoltageAdc","attr","height","width","fluctuation","xScale","domain","length","range","yScale","Math","floor","min","ceil","max","padding","xAxis","scale","tickValues","yAxis","console","log","enter","append","d","call","display","distance","energy","maxGpsSpeed","minWheelRPM","maxWheelRPM","ref","App","arr","useState","indexOf","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.087f8b59.chunk.js","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport './style.css';\nimport obj from './data.json'\nimport * as d3 from 'd3';\n\nconst data = obj.trip\n\nconst vehicle1 = data.slice(0,10)\nconst vehicle2 = data.slice(10, 20)\n\nconsole.log(vehicle1, vehicle2)\n\n// select vehicle and trip before loading data\nfunction Select({vin, setVin, tripId, setTripId}) {\n    return (\n        <div className=\"select\">\n            <div className=\"flex-end\">\n                <label htmlFor=\"vin\">vin:</label>\n                <select name=\"vin\" id=\"vin\" value={vin} onChange={e => {setVin(e.target.value); setTripId(\"Select Trip\")}}>\n                    <option value=\"Select Vehicle\" disabled>Select Vehicle</option>\n                    <option value=\"VEHICLE_UI\">VEHICLE_UI</option>\n                    <option value=\"AIMA_OFFICE\">AIMA_OFFICE</option>\n                </select>\n            </div>\n            <div>\n            <label htmlFor=\"tripId\">tripId:</label>\n            {(() => {\n                    if(vin!==\"Select Vehicle\") {\n                        return (\n                            <select name=\"tripId\" id=\"tripId\" value={tripId} onChange={e => setTripId(e.target.value)}>\n                                <option value=\"Select Trip\" selected disabled>Select Trip</option>\n                                {(() => { \n                                    if(vin === \"VEHICLE_UI\") \n                                        return vehicle1.map((cur,i) => <option key={i} value={cur.tripId}>{cur.tripId}</option>);\n                                    if(vin === \"AIMA_OFFICE\") \n                                        return vehicle2.map((cur,i) => <option key={i} value={cur.tripId}>{cur.tripId}</option>);\n                                    })()\n                                }\n                            </select>\n                            )\n                    } else return (<select name=\"tripId\" id=\"tripId\" disabled><option value=\"Select Trip\">Select Trip</option></select>)\n                })()\n            }\n            </div>\n        </div>\n    )\n}\n\nfunction Data({vin, tripId, data}) {\n    \n    const linechart = useRef(null);\n\n    useEffect(() => {\n        const chart = d3.select(linechart.current);\n        \n        // clear previous\n        chart.selectAll('circle').remove();\n        chart.selectAll('g').remove();\n\n        if(tripId !== \"Select Trip\" && data.batteryVoltageAdc !== []) {\n\n            const padding = 30;\n            const height = 200;\n            const width = 400;\n            chart.attr('height', height+padding).attr('width', width+padding)\n\n            const fluctuation = data.batteryVoltageAdc\n\n            // set scale and axes\n            const xScale = d3.scaleLinear().domain([0, fluctuation.length]).range([padding, width+padding]);\n            const yScale = d3.scaleLinear().domain([Math.floor(Math.min(...fluctuation))-3, Math.ceil(Math.max(...fluctuation))+3]).range([height, padding/2]);\n            const xAxis = d3.axisBottom().scale(xScale).tickValues([]);\n            const yAxis = d3.axisLeft().scale(yScale);\n            console.log(fluctuation)\n            // append circles\n            chart.selectAll('circle')\n            .data(fluctuation)\n            .enter()\n            .append('circle')\n            .attr('r', 3)\n            .attr('cx', (d,i) => xScale(i) + 5)\n            .attr('cy', d => yScale(d) + padding/2)\n            .attr('fill', 'cyan');\n\n            // append axes\n            chart.append('g')\n                 .call(xAxis)\n                 .attr('transform', `translate(-2, ${height+padding/2})`)\n            chart.append('g')\n                 .call(yAxis)\n                 .attr('transform', `translate(${padding-2}, ${padding/2})`)\n        }\n    });\n\n    const display = value => value ? value : \"-\";\n    \n    if(tripId === \"Select Trip\") return null; // TODO: design blank dashboard\n    \n    return (\n        <div className=\"data\">\n            <div className=\"main\">\n                <div className=\"info\">\n                    <div className=\"pair\">\n                        <span className=\"key material-icons\">place</span>\n                        <span className=\"value\">{display(data.distance)}</span>\n                        <div className=\"tooltip\">Distance</div>\n                    </div>\n                    <div className=\"pair\">\n                        <span className=\"key material-icons\">power</span>\n                        <span className=\"value\">{display(data.energy)}</span>\n                        <div className=\"tooltip\">Energy Consumption</div>\n                    </div>\n                    <div className=\"pair\">\n                        <span className=\"key material-icons\">speed</span>\n                        <span className=\"value\">{display(data.maxGpsSpeed)}</span>\n                        <div className=\"tooltip\">Max Speed (GPS)</div>\n                    </div>\n                </div>\n                <div className=\"RPM\">\n                    <div className=\"RPMval\">{display(data.minWheelRPM)}</div><span>Min RPM</span>\n                    <div className=\"RPMval\">{display(data.maxWheelRPM)}</div><span>Max RPM</span>\n                </div>\n            </div>\n            <div className=\"voltage\">\n                Battery Voltage Fluctuation\n                <div className=\"linechart\">\n                    <svg ref={linechart}></svg>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nfunction App() {\n\n    const [vin, setVin] = useState(\"Select Vehicle\");\n    const [tripId, setTripId] = useState(\"Select Trip\");\n\n    let arr;\n    vin === \"VEHICLE_UI\" ? arr = vehicle1 : arr = vehicle2;\n    let i = arr.map(cur => cur.tripId).indexOf(tripId);\n    let data = arr[i];\n    \n    return (\n        <div className=\"container\">\n            <Select vin={vin} setVin={setVin} tripId={tripId} setTripId={setTripId} />\n            <Data vin={vin} tripId={tripId} data={data} />\n        </div>\n    )\n}\n\nReactDOM.render(<App />, document.querySelector('#root'));"],"sourceRoot":""}